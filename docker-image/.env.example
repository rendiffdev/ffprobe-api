# FFprobe API Docker Environment Configuration
# Copy this file to .env and configure for your environment
#
# SECURITY WARNING:
# - For PRODUCTION: You MUST set strong secrets before deployment
# - For DEVELOPMENT: Use CLOUD_MODE=true to skip strict validation
# - Generate secrets with: ./scripts/secrets-manager.sh generate

# === API Configuration ===
API_PORT=8080
LOG_LEVEL=info

# === Security Configuration ===
# PRODUCTION: Set these to strong values (min 32 chars each)
# Generate with: openssl rand -hex 32
API_KEY=
JWT_SECRET=

# Authentication mode
# PRODUCTION: ENABLE_AUTH=true, CLOUD_MODE=false
# DEVELOPMENT: ENABLE_AUTH=false, CLOUD_MODE=true
ENABLE_AUTH=true
CLOUD_MODE=false
SKIP_AUTH_VALIDATION=false

# === Database Configuration (SQLite - No external database needed) ===
DB_TYPE=sqlite
DB_PATH=/app/data/ffprobe.db

# === Cache Configuration (Valkey - Redis compatible, open source) ===
# CRITICAL: Generate a strong password for production!
# Generate with: openssl rand -base64 32
VALKEY_PASSWORD=
VALKEY_PORT=6379

# === AI/LLM Configuration ===
ENABLE_LOCAL_LLM=true
OLLAMA_MODEL=gemma3:270m
OLLAMA_FALLBACK_MODEL=phi3:mini
OLLAMA_PORT=11434

# === Performance Configuration ===
WORKER_POOL_SIZE=8
PROCESSING_TIMEOUT=600
MAX_FILE_SIZE=21474836480

# === Rate Limiting ===
ENABLE_RATE_LIMIT=true
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=5000

# === Production Configuration (for compose.prod.yml) ===
# DOMAIN=api.yourdomain.com
# ACME_EMAIL=admin@yourdomain.com
# TRAEFIK_AUTH=admin:$$2y$$10$$...  # htpasswd generated
# GRAFANA_PASSWORD=your-secure-password

# === Backup Configuration ===
# BACKUP_RETENTION_DAYS=30
# BACKUP_S3_BUCKET=ffprobe-backups
# BACKUP_S3_ACCESS_KEY=
# BACKUP_S3_SECRET_KEY=
# BACKUP_ENCRYPTION_KEY=